{% extends 'base.html' %}
{% block content %}
  <h2>Send Message</h2>

  <form method="post">
    {% csrf_token %}
    <div class="form-group">
      <label for="to_user">Send To:</label>
      <select name="to_user" required>
        <option value="">-- Select User --</option>
        {% for u in users %}
            <option value="{{ u.id }}" {% if preselect == u.id|stringformat:"s" %}selected{% endif %}>
            {{ u.first_name|default:u.username }} ({{ u.email }})
            </option>
        {% endfor %}
        </select>

    </div>

    <div class="form-group">
      <label for="message">Message:</label>
      <textarea name="message" rows="5" placeholder="Type your message here..." required></textarea>
    </div>

    <button type="submit">Send</button>
  </form>

  <style>
    form {
      background: #f9f9f9;
      padding: 20px;
      border-radius: 10px;
      max-width: 500px;
      margin: 0 auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
      color: #003366;
    }
    select, textarea {
      width: 100%;
      padding: 8px;
      margin: 6px 0 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background: #004080;
      color: white;
      padding: 8px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #0066cc;
    }
  </style>
{% endblock %}
